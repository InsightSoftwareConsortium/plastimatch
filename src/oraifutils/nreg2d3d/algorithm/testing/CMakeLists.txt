
# composite metric test
INCLUDE_DIRECTORIES(
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_BASICTESTING_SUBDIR}
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_INTERPOLATION_SUBDIR} 
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_ALGORITHM_SUBDIR} 
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_TRANSFORM_SUBDIR}
)
ADD_EXECUTABLE(TestCompositeImageToImageMetric
  
  TestCompositeImageToImageMetric.cxx
  
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_INTERPOLATION_SUBDIR}/oraOneToOneInterpolateImageFunction.h
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_INTERPOLATION_SUBDIR}/oraOneToOneInterpolateImageFunction.txx
  
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_ALGORITHM_SUBDIR}/oraMetricEvents.hxx
  
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_ALGORITHM_SUBDIR}/oraCompositeImageToImageMetric.h
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_ALGORITHM_SUBDIR}/oraCompositeImageToImageMetric.txx
  
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_TRANSFORM_SUBDIR}/oraParametrizableIdentityTransform.h
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_TRANSFORM_SUBDIR}/oraParametrizableIdentityTransform.txx  
)
TARGET_LINK_LIBRARIES(TestCompositeImageToImageMetric
  ORAIFNReg2D3DAlgorithm
  ORAIFNReg2D3DTransform
  ORAIFNReg2D3DInterpolation
)
ADD_TEST(TestCompositeImageToImageMetric ${EXECUTABLE_OUTPUT_PATH}/TestCompositeImageToImageMetric -v)


# multi metric test
INCLUDE_DIRECTORIES(
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_BASICTESTING_SUBDIR}
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_INTERPOLATION_SUBDIR} 
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_ALGORITHM_SUBDIR} 
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_TRANSFORM_SUBDIR}
)
ADD_EXECUTABLE(TestMultiImageToImageMetric
  
  TestMultiImageToImageMetric.cxx
  
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_INTERPOLATION_SUBDIR}/oraOneToOneInterpolateImageFunction.h
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_INTERPOLATION_SUBDIR}/oraOneToOneInterpolateImageFunction.txx
  
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_ALGORITHM_SUBDIR}/oraMetricEvents.hxx
  
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_ALGORITHM_SUBDIR}/oraMultiImageToImageMetric.h
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_ALGORITHM_SUBDIR}/oraMultiImageToImageMetric.txx
  
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_TRANSFORM_SUBDIR}/oraParametrizableIdentityTransform.h
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_TRANSFORM_SUBDIR}/oraParametrizableIdentityTransform.txx  
)
TARGET_LINK_LIBRARIES(TestMultiImageToImageMetric
  ORAIFNReg2D3DAlgorithm
  ORAIFNReg2D3DTransform
  ORAIFNReg2D3DInterpolation
)
ADD_TEST(TestMultiImageToImageMetric ${EXECUTABLE_OUTPUT_PATH}/TestMultiImageToImageMetric -v)


# n-way registration test
INCLUDE_DIRECTORIES(
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_BASICTESTING_SUBDIR}
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_INTERPOLATION_SUBDIR} 
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_ALGORITHM_SUBDIR} 
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_TRANSFORM_SUBDIR}
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}
)
ADD_EXECUTABLE(TestMultiResolutionNWay2D3DRegistrationMethod
  
  CommonRegistrationToolFunctions.hxx
  TestMultiResolutionNWay2D3DRegistrationMethod.cxx
  
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_INTERPOLATION_SUBDIR}/oraOneToOneInterpolateImageFunction.h
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_INTERPOLATION_SUBDIR}/oraOneToOneInterpolateImageFunction.txx
  
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraProjectionProperties.h
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraProjectionProperties.txx    
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraGLSLDRRRayCasterDevMethods.hxx
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraGLSLDRRRayCastMapper.h
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraGLSLDRRRayCastMapper.cxx
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraGLSLRayCastingCodeFragments.hxx
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraRGBTableManager.h
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraRGBTableManager.cxx
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraScalarFieldManager.h
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraScalarFieldManager.cxx  
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraITKVTKDRRFilter.h
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraITKVTKDRRFilter.txx 
  
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_TRANSFORM_SUBDIR}/oraITKVTKLinearTransformConnector.h
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_TRANSFORM_SUBDIR}/oraITKVTKLinearTransformConnector.cxx  
    
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_ALGORITHM_SUBDIR}/oraMetricEvents.hxx
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_ALGORITHM_SUBDIR}/oraCompositeImageToImageMetric.h
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_ALGORITHM_SUBDIR}/oraCompositeImageToImageMetric.txx
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_ALGORITHM_SUBDIR}/oraMultiImageToImageMetric.h
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_ALGORITHM_SUBDIR}/oraMultiImageToImageMetric.txx  
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_ALGORITHM_SUBDIR}/oraMultiResolutionNWay2D3DRegistrationMethod.h
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_ALGORITHM_SUBDIR}/oraMultiResolutionNWay2D3DRegistrationMethod.txx
)
TARGET_LINK_LIBRARIES(TestMultiResolutionNWay2D3DRegistrationMethod
  ORAIFNReg2D3DAlgorithm
  ORAIFNReg2D3DInterpolation
  ORAIFNReg2D3DTransform
  ORAIFNReg2D3DDRREngine  
)
ADD_TEST(TestMultiResolutionNWay2D3DRegistrationMethod ${EXECUTABLE_OUTPUT_PATH}/TestMultiResolutionNWay2D3DRegistrationMethod -v -xo)


# n-way registration test (2)
INCLUDE_DIRECTORIES(
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_BASICTESTING_SUBDIR}
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_INTERPOLATION_SUBDIR} 
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_ALGORITHM_SUBDIR} 
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_TRANSFORM_SUBDIR}
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}
)
ADD_EXECUTABLE(TestMultiResolutionNWay2D3DRegistrationMethod2
  
  CommonRegistrationToolFunctions.hxx
  TestMultiResolutionNWay2D3DRegistrationMethod2.cxx
  
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_INTERPOLATION_SUBDIR}/oraOneToOneInterpolateImageFunction.h
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_INTERPOLATION_SUBDIR}/oraOneToOneInterpolateImageFunction.txx
  
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraProjectionProperties.h
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraProjectionProperties.txx    
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraGLSLDRRRayCasterDevMethods.hxx
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraGLSLDRRRayCastMapper.h
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraGLSLDRRRayCastMapper.cxx
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraGLSLRayCastingCodeFragments.hxx
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraRGBTableManager.h
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraRGBTableManager.cxx
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraScalarFieldManager.h
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraScalarFieldManager.cxx  
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraITKVTKDRRFilter.h
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_DRRENGINE_SUBDIR}/oraITKVTKDRRFilter.txx 
  
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_TRANSFORM_SUBDIR}/oraITKVTKLinearTransformConnector.h
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_TRANSFORM_SUBDIR}/oraITKVTKLinearTransformConnector.cxx  
    
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_ALGORITHM_SUBDIR}/oraMetricEvents.hxx
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_ALGORITHM_SUBDIR}/oraCompositeImageToImageMetric.h
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_ALGORITHM_SUBDIR}/oraCompositeImageToImageMetric.txx
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_ALGORITHM_SUBDIR}/oraMultiImageToImageMetric.h
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_ALGORITHM_SUBDIR}/oraMultiImageToImageMetric.txx  
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_ALGORITHM_SUBDIR}/oraMultiResolutionNWay2D3DRegistrationMethod.h
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_ALGORITHM_SUBDIR}/oraMultiResolutionNWay2D3DRegistrationMethod.txx
)
TARGET_LINK_LIBRARIES(TestMultiResolutionNWay2D3DRegistrationMethod2
  ORAIFNReg2D3DAlgorithm
  ORAIFNReg2D3DInterpolation
  ORAIFNReg2D3DTransform
  ORAIFNReg2D3DDRREngine  
)
ADD_TEST(TestMultiResolutionNWay2D3DRegistrationMethod2 ${EXECUTABLE_OUTPUT_PATH}/TestMultiResolutionNWay2D3DRegistrationMethod2 -v -xo)


INCLUDE_DIRECTORIES(
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_BASICTESTING_SUBDIR}
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_ALGORITHM_SUBDIR} 
)
ADD_EXECUTABLE(TestAmoebaOptimizerEx
  
  TestAmoebaOptimizerEx.cxx
  
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_ALGORITHM_SUBDIR}/vnl_amoeba_ex.h
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_ALGORITHM_SUBDIR}/vnl_amoeba_ex.cxx
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_ALGORITHM_SUBDIR}/itkAmoebaOptimizerEx.h
  ${CMAKE_SOURCE_DIR}/${ORAIFUTILS_NREG2D3D_ALGORITHM_SUBDIR}/itkAmoebaOptimizerEx.cxx
)
TARGET_LINK_LIBRARIES(TestAmoebaOptimizerEx
  ORAIFNReg2D3DAlgorithm
)
ADD_TEST(TestAmoebaOptimizerEx ${EXECUTABLE_OUTPUT_PATH}/TestAmoebaOptimizerEx -v)
SET_TESTS_PROPERTIES(TestAmoebaOptimizerEx PROPERTIES TIMEOUT 30)
